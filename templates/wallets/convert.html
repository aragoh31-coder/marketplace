{% extends 'base.html' %}

{% block title %}Convert Currency{% endblock %}

{% block content %}
<div class="container">
    <h1>Convert Currency</h1>
    
    <div class="grid">
        <div class="card">
            <h2>Currency Conversion</h2>
            
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
            
            <form method="post" action="{% url 'wallets:convert' %}">
                {% csrf_token %}
                {{ form.honeypot_field }}
                
                <div class="form-group">
                    <label for="{{ form.from_currency.id_for_label }}">From:</label>
                    {{ form.from_currency }}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.to_currency.id_for_label }}">To:</label>
                    {{ form.to_currency }}
                </div>
                
                <div class="form-group">
                    <label for="{{ form.amount.id_for_label }}">Amount:</label>
                    {{ form.amount }}
                    {% if form.amount.errors %}
                        <div class="error">{{ form.amount.errors }}</div>
                    {% endif %}
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Convert</button>
                    <a href="{% url 'wallets:dashboard' %}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
        
        <div class="card">
            <h2>Information</h2>
            
            <h3>Your Balances</h3>
            <table>
                <tr>
                    <td>BTC Available:</td>
                    <td><strong>{{ btc_available|floatformat:8 }}</strong></td>
                </tr>
                <tr>
                    <td>XMR Available:</td>
                    <td><strong>{{ xmr_available|floatformat:12 }}</strong></td>
                </tr>
            </table>
            
            <h3>Current Rates</h3>
            <table>
                {% if rates.btc_xmr %}
                <tr>
                    <td>1 BTC =</td>
                    <td><strong>{{ rates.btc_xmr|floatformat:6 }} XMR</strong></td>
                </tr>
                {% endif %}
                {% if rates.xmr_btc %}
                <tr>
                    <td>1 XMR =</td>
                    <td><strong>{{ rates.xmr_btc|floatformat:8 }} BTC</strong></td>
                </tr>
                {% endif %}
            </table>
            
            <p class="notice">
                • No conversion fees<br>
                • Instant conversion<br>
                • Rates updated regularly
            </p>
        </div>
    </div>
</div>
{% endblock %}
