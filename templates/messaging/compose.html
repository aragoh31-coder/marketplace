{% extends "base_tor_safe.html" %}

{% block title %}Compose Message - Secure Marketplace{% endblock %}

{% block content %}
<div class="container">
    <h1>‚úâÔ∏è Compose Message</h1>
    
    <div class="compose-wrapper">
        <form method="post" class="compose-form">
            {% csrf_token %}
            <input type="hidden" name="honeypot_field" class="honeypot">
            
            <div class="form-group">
                <label for="recipient">To:</label>
                <input type="text" name="recipient" id="recipient" placeholder="Username" required>
                <small class="help-text">Enter the username of the person you want to message</small>
            </div>
            
            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" name="subject" id="subject" placeholder="Message subject">
            </div>
            
            <div class="form-group">
                <label for="content">Message:</label>
                <textarea name="content" id="content" rows="10" placeholder="Type your message here..." required></textarea>
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="encrypt" id="encrypt">
                    Encrypt message with PGP (if recipient has public key)
                </label>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Send Message</button>
                <a href="{% url 'messaging:list' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
        
        <div class="compose-info">
            <h3>üí° Message Tips</h3>
            <ul>
                <li>Be respectful and professional in all communications</li>
                <li>Use PGP encryption for sensitive information</li>
                <li>Include order numbers when discussing transactions</li>
                <li>Report suspicious messages to administrators</li>
            </ul>
            
            <h3>üîí Security Features</h3>
            <ul>
                <li>All messages are stored encrypted on our servers</li>
                <li>PGP encryption provides end-to-end security</li>
                <li>Messages are automatically deleted after 90 days</li>
                <li>No message content is logged or monitored</li>
            </ul>
        </div>
    </div>
</div>

<style>
    .compose-wrapper {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 30px;
    }
    
    .compose-form {
        background: #1a1a1a;
        padding: 30px;
        border-radius: 8px;
        border: 1px solid #333;
    }
    
    .form-group {
        margin-bottom: 25px;
    }
    
    .form-group label {
        display: block;
        color: #888;
        margin-bottom: 8px;
        font-weight: bold;
    }
    
    .form-group input,
    .form-group textarea {
        width: 100%;
        background: #2a2a2a;
        border: 1px solid #444;
        color: #fff;
        padding: 12px;
        border-radius: 5px;
        font-size: 14px;
        font-family: inherit;
    }
    
    .form-group input:focus,
    .form-group textarea:focus {
        border-color: #4CAF50;
        outline: none;
    }
    
    .form-group textarea {
        resize: vertical;
        min-height: 200px;
    }
    
    .help-text {
        display: block;
        color: #666;
        font-size: 12px;
        margin-top: 5px;
    }
    
    .checkbox-label {
        display: flex !important;
        align-items: center;
        gap: 10px;
        cursor: pointer;
    }
    
    .checkbox-label input[type="checkbox"] {
        width: auto;
        margin: 0;
    }
    
    .form-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
    }
    
    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        font-weight: bold;
        font-size: 16px;
    }
    
    .btn-primary {
        background: #4CAF50;
        color: white;
    }
    
    .btn-primary:hover {
        background: #45a049;
    }
    
    .btn-secondary {
        background: #666;
        color: white;
    }
    
    .btn-secondary:hover {
        background: #555;
    }
    
    .compose-info {
        background: #1a1a1a;
        padding: 30px;
        border-radius: 8px;
        border: 1px solid #333;
    }
    
    .compose-info h3 {
        color: #4CAF50;
        margin-bottom: 15px;
        font-size: 16px;
    }
    
    .compose-info ul {
        margin-bottom: 25px;
        padding-left: 20px;
    }
    
    .compose-info li {
        color: #ccc;
        margin-bottom: 8px;
        font-size: 14px;
    }
    
    .honeypot {
        position: absolute;
        left: -9999px;
    }
    
    @media (max-width: 768px) {
        .compose-wrapper {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}
