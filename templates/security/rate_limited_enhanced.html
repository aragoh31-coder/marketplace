{% extends 'base_tor_safe.html' %}

{% block title %}Rate Limited - Secure Marketplace{% endblock %}

{% block extra_head %}
<style>
    .rate-limit-container {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        text-align: center;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px solid #ffc107;
    }
    
    .rate-limit-icon {
        font-size: 4rem;
        color: #ffc107;
        margin-bottom: 1rem;
    }
    
    .rate-limit-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 1rem;
    }
    
    .rate-limit-message {
        color: #666;
        margin-bottom: 2rem;
        line-height: 1.6;
    }
    
    .retry-info {
        background: white;
        padding: 1.5rem;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        margin-bottom: 2rem;
    }
    
    .retry-timer {
        font-size: 1.2rem;
        font-weight: bold;
        color: #007bff;
        margin: 1rem 0;
    }
    
    .security-tips {
        background: #e9ecef;
        padding: 1.5rem;
        border-radius: 4px;
        text-align: left;
    }
    
    .security-tips h3 {
        margin-top: 0;
        color: #495057;
    }
    
    .security-tips ul {
        margin-bottom: 0;
    }
    
    .btn {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin: 0.5rem;
    }
    
    .btn:hover {
        background: #0056b3;
        color: white;
        text-decoration: none;
    }
    
    .btn-secondary {
        background: #6c757d;
    }
    
    .btn-secondary:hover {
        background: #545b62;
    }
</style>
{% endblock %}

{% block content %}
<div class="rate-limit-container">
    <div class="rate-limit-icon">‚è±Ô∏è</div>
    
    <div class="rate-limit-title">
        Rate Limit Exceeded
    </div>
    
    <div class="rate-limit-message">
        You have made too many requests in a short period of time. 
        This security measure helps protect our marketplace from automated attacks 
        and ensures fair access for all users.
    </div>
    
    <div class="retry-info">
        <h3>‚è∞ When can I try again?</h3>
        <div class="retry-timer" id="retryTimer">
            Please wait {{ retry_after|default:60 }} seconds before trying again
        </div>
        <p>
            {% if limit_type == 'withdrawal' %}
                <strong>Withdrawal Rate Limit:</strong> Too many withdrawal attempts
            {% elif limit_type == 'conversion' %}
                <strong>Conversion Rate Limit:</strong> Too many conversion attempts  
            {% elif limit_type == 'login' %}
                <strong>Login Rate Limit:</strong> Too many login attempts
            {% elif limit_type == 'registration' %}
                <strong>Registration Rate Limit:</strong> Too many registration attempts
            {% else %}
                <strong>General Rate Limit:</strong> Too many requests
            {% endif %}
        </p>
    </div>
    
    <div class="security-tips">
        <h3>üîí Why do we have rate limits?</h3>
        <ul>
            <li><strong>Security:</strong> Prevents automated attacks and brute force attempts</li>
            <li><strong>Performance:</strong> Ensures the marketplace remains fast for everyone</li>
            <li><strong>Fairness:</strong> Gives all users equal access to our services</li>
            <li><strong>Privacy:</strong> Protects against data scraping and surveillance</li>
        </ul>
        
        <h3>üí° Tips to avoid rate limits:</h3>
        <ul>
            <li>Wait between requests instead of rapid clicking</li>
            <li>Double-check information before submitting forms</li>
            <li>Use the marketplace normally, not automated tools</li>
            <li>Contact support if you believe this is an error</li>
        </ul>
    </div>
    
    <div style="margin-top: 2rem;">
        <a href="/" class="btn">üè† Return Home</a>
        <a href="/support/contact/" class="btn btn-secondary">üìß Contact Support</a>
    </div>
</div>

<div style="margin-top: 2rem; text-align: center;">
    <a href="{{ request.path }}" class="btn">üîÑ Refresh to Check Timer</a>
</div>
{% endblock %}
